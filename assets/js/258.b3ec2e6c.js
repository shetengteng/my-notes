(window.webpackJsonp=window.webpackJsonp||[]).push([[258],{1213:function(s,t,a){"use strict";a.r(t);var v=a(15),e=Object(v.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("p",[s._v("作用：定时调度执行脚本或者代码，如定时调用 备份mysql 数据；对于简单的任务，可以不用编写脚本，直接在crontab中加入任务")]),s._v(" "),a("p",[s._v("任务调度：系统在某个时间执行特定的命令或程序")]),s._v(" "),a("p",[s._v("任务调度分类")]),s._v(" "),a("ul",[a("li",[s._v("系统工作，有些重要的任务需要定期执行，如病毒扫描")]),s._v(" "),a("li",[s._v("个别用户工作，用户希望执行某些程序，如对mysql进行备份")])]),s._v(" "),a("h2",{attrs:{id:"crontab-定时任务设置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#crontab-定时任务设置"}},[s._v("#")]),s._v(" crontab 定时任务设置")]),s._v(" "),a("p",[s._v("基本语法")]),s._v(" "),a("ul",[a("li",[s._v("crontab [选项]")])]),s._v(" "),a("p",[s._v("选项")]),s._v(" "),a("ul",[a("li",[s._v("-e   编辑crontab定时任务")]),s._v(" "),a("li",[s._v("-l    查询crontab任务")]),s._v(" "),a("li",[s._v("-r    删除当前用户所有的crontab任务")])]),s._v(" "),a("h3",{attrs:{id:"入门使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#入门使用"}},[s._v("#")]),s._v(" 入门使用")]),s._v(" "),a("p",[s._v("需求")]),s._v(" "),a("ul",[a("li",[s._v("设置任务调度文件 /etc/crontab")]),s._v(" "),a("li",[s._v("设置个人任务调度，执行crontab -e 命令")]),s._v(" "),a("li",[s._v("输入任务到调度文件\n"),a("ul",[a("li",[s._v("如 */1 * * * * ls -l /etc >> /tmp/to.txt")]),s._v(" "),a("li",[s._v("每个小时，每分钟执行 ls -l /etc >> /tmp/to.txt 命令")])])])]),s._v(" "),a("p",[s._v("步骤")]),s._v(" "),a("ul",[a("li",[s._v("crontab -e")]),s._v(" "),a("li",[s._v("*/1 * * * * ls -l /etc >> /tmp/to.txt")]),s._v(" "),a("li",[s._v("保存成功后退出程序")]),s._v(" "),a("li",[s._v("观察每一分钟都会自动调用  ls -l /etc >> /tmp/to.txt")])]),s._v(" "),a("h3",{attrs:{id:"cron-表达式说明"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cron-表达式说明"}},[s._v("#")]),s._v(" cron 表达式说明")]),s._v(" "),a("p",[s._v("使用cron表达式+命令")]),s._v(" "),a("p",[s._v("说明")]),s._v(" "),a("ul",[a("li",[s._v("第一个* \t一小时当中的第几分钟 0-59")]),s._v(" "),a("li",[s._v("第二个*\t一天当中的第几个小时 0-23")]),s._v(" "),a("li",[s._v("第三个* \t一个月当中第几天\t1-31")]),s._v(" "),a("li",[s._v("第四个*\t一年当中第几个月\t1-12")]),s._v(" "),a("li",[s._v("第五个*\t一周当中星期几 0-7(0和7都表示周日)")])]),s._v(" "),a("p",[s._v("特殊符号")]),s._v(" "),a("ul",[a("li",[a("p",[a("code",[s._v("*")]),s._v("   表示任何时间，如第一个*就表示一小时中，每分钟都执行一次")])]),s._v(" "),a("li",[a("p",[a("code",[s._v(",")]),s._v('  表示不连续的时间，如"0 8,16,20 * * *"，表示每日8点，16点，20点执行一次')])]),s._v(" "),a("li",[a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[s._v('   `-`   表示连续的时间范围，如"0 5 * * 1-6"，表示周一到周六每日5点执行一次\n')])])])]),s._v(" "),a("li",[a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[s._v('   `*/n` 表示每隔多久执行一次，如"*/10 * * * *"，表示每隔10分钟执行一次\n')])])])])]),s._v(" "),a("p",[s._v("应用实例")]),s._v(" "),a("ul",[a("li",[s._v("45 22 * * * \t每日22点45分执行")]),s._v(" "),a("li",[s._v("0 17 * * 1\t\t每周一17点执行")]),s._v(" "),a("li",[s._v("0 5 1,15 * *\t每个月1号，15号，5点执行")]),s._v(" "),a("li",[s._v("40 4 * * 1-5\t周一到周五4点40执行")]),s._v(" "),a("li",[s._v("*/10 4 * * *\t每日4点每10分钟执行一次")]),s._v(" "),a("li",[s._v("0 0 1,15 * 1\t每个月1号，15号，周一，0点都执行，注意：星期和几号不要同时出现，都是定义天，容易混乱")])]),s._v(" "),a("h3",{attrs:{id:"应用案例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#应用案例"}},[s._v("#")]),s._v(" 应用案例")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("每隔1min 将当前日期信息追加到/tmp/mydate文件中")]),s._v(" "),a("ul",[a("li",[s._v("先编写一个shell，/home/mytask.sh")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("date")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" /tmp/mydate\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[s._v("给 /home/mytask.sh一个执行权限")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("744")]),s._v(" /home/mytask.sh\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[s._v("crontab -e")]),s._v(" "),a("li",[s._v("*/1 * * * * /home/mytask.sh")])])]),s._v(" "),a("li",[a("p",[s._v("每隔1min，将当前日期和日历追加到 /tmp/mycal 文件中")]),s._v(" "),a("ul",[a("li",[s._v("先编写一个shell文件 /home/mytask2.sh")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("date")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" /tmp/mycal\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cal")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" /tmp/mycal\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("ul",[a("li",[s._v("给 /home/mytask2.sh 赋予执行权限")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("744")]),s._v(" /home/mytask2.sh\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[s._v("crontab -e")]),s._v(" "),a("li",[s._v("*/1 * * * * /home/mytask2.sh")])])]),s._v(" "),a("li",[a("p",[s._v("每日凌晨2点，将mysql数据testdb 备份到文件中mydb.bak")]),s._v(" "),a("ul",[a("li",[s._v("先编写一个文件 /home/task3.sh")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("/usr/local/mysql/bin/mysqldump -u root -p root testdb "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" /tmp/mydb.bak\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[s._v("给/home/task3.sh 一个执行权限")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("744")]),s._v(" /home/task3.sh\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[s._v("crontab -e")]),s._v(" "),a("li",[s._v("0 2 * * * /home/task3.sh")])])])]),s._v(" "),a("h2",{attrs:{id:"crond-相关指令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#crond-相关指令"}},[s._v("#")]),s._v(" crond 相关指令")]),s._v(" "),a("ul",[a("li",[s._v("crontab -l：列出当前有哪些任务调度")]),s._v(" "),a("li",[s._v("crontab -r：终止任务调度")]),s._v(" "),a("li",[s._v("service crond restart：重启任务调度")])])])}),[],!1,null,null,null);t.default=e.exports}}]);