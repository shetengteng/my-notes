(window.webpackJsonp=window.webpackJsonp||[]).push([[220],{1223:function(t,s,a){"use strict";a.r(s);var n=a(15),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"topic-命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#topic-命令"}},[t._v("#")]),t._v(" topic 命令")]),t._v(" "),a("blockquote",[a("p",[t._v("用于操作broker")])]),t._v(" "),a("p",[t._v("查看topic命令参数")]),t._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@linux101 kafka"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# bin/kafka-topics.sh ")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h3",{attrs:{id:"常用参数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#常用参数"}},[t._v("#")]),t._v(" 常用参数")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("参数")]),t._v(" "),a("th",[t._v("描述")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("--bootstrap-server <String: server toconnect to>")]),t._v(" "),a("td",[t._v("连接的 Kafka Broker主机名称和端口号")])]),t._v(" "),a("tr",[a("td",[t._v("--topic <String: topic>")]),t._v(" "),a("td",[t._v("操作的 topic名称")])]),t._v(" "),a("tr",[a("td",[t._v("--create")]),t._v(" "),a("td",[t._v("创建主题")])]),t._v(" "),a("tr",[a("td",[t._v("--delete")]),t._v(" "),a("td",[t._v("删除主题")])]),t._v(" "),a("tr",[a("td",[t._v("--alter")]),t._v(" "),a("td",[t._v("修改主题")])]),t._v(" "),a("tr",[a("td",[t._v("--list")]),t._v(" "),a("td",[t._v("查看所有主题")])]),t._v(" "),a("tr",[a("td",[t._v("--describe")]),t._v(" "),a("td",[t._v("查看主题详细描述")])]),t._v(" "),a("tr",[a("td",[t._v("--partitions <Integer:  number of partitions>")]),t._v(" "),a("td",[t._v("设置分区数")])]),t._v(" "),a("tr",[a("td",[t._v("--replication-factor<Integer: replication factor>")]),t._v(" "),a("td",[t._v("设置分区副本")])]),t._v(" "),a("tr",[a("td",[t._v("--config <String: name=value>")]),t._v(" "),a("td",[t._v("更新系统默认的配置")])]),t._v(" "),a("tr",[a("td"),t._v(" "),a("td")])])]),t._v(" "),a("h3",{attrs:{id:"创建topic"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建topic"}},[t._v("#")]),t._v(" 创建topic")]),t._v(" "),a("p",[t._v("创建时需要指定分区个数以副本个数，同时需要指定链接的服务器，可以使用 "),a("code",[t._v(",")]),t._v(" 关联多个服务器\n此处示例创建名为first主题")]),t._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@linux101 kafka"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# bin/kafka-topics.sh --bootstrap-server linux102:9092,linux103:9092 --topic first --create --partitions 1 --replication-factor 3")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("选项说明")]),t._v(" "),a("ul",[a("li",[t._v("--topic 定义 topic 名")]),t._v(" "),a("li",[t._v("--replication-factor 定义副本数")]),t._v(" "),a("li",[t._v("--partitions 定义分区数")])]),t._v(" "),a("h3",{attrs:{id:"查看topic列表"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查看topic列表"}},[t._v("#")]),t._v(" 查看topic列表")]),t._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@linux101 kafka"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# bin/kafka-topics.sh --bootstrap-server linux102:9092,linux103:9092 --list")]),t._v("\nfirst\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("h3",{attrs:{id:"查看topic详情"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查看topic详情"}},[t._v("#")]),t._v(" 查看topic详情")]),t._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@linux101 kafka"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# bin/kafka-topics.sh --bootstrap-server linux102:9092 --topic first --describe")]),t._v("\nTopic: first    TopicId: EgupyZ8MSGeKl9ePG3qGJw PartitionCount: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("       ReplicationFactor: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v("    Configs: segment.bytes"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1073741824")]),t._v("\n        Topic: first    Partition: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("    Leader: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("       Replicas: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0,2")]),t._v(",1 Isr: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0,2")]),t._v(",1\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("p",[t._v("返回结果包含")]),t._v(" "),a("ul",[a("li",[t._v("topic name")]),t._v(" "),a("li",[t._v("topic Id")]),t._v(" "),a("li",[t._v("分区数")]),t._v(" "),a("li",[t._v("副本数")]),t._v(" "),a("li",[t._v("配置 segment 大小，默认1g")]),t._v(" "),a("li",[t._v("Leader：0 表示目前分区的leader位于broker0服务器上")]),t._v(" "),a("li",[t._v("Replicas：0,2,1  表示 副本位于broker0,2,1服务器上")]),t._v(" "),a("li",[t._v("ISR: 0,2,1 表示同步副本(In-Sync Replica)位于broker0,2,1服务器上")])]),t._v(" "),a("h3",{attrs:{id:"修改topic"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#修改topic"}},[t._v("#")]),t._v(" 修改topic")]),t._v(" "),a("p",[t._v("修改分区数（注意：分区数只能增加不能减少，由于已经创建的分区可能已经存储了消息，那么可能会有消费者还没有消费消息，从功能的角度而言不能减少分区数目）")]),t._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@linux101 kafka"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# bin/kafka-topics.sh --bootstrap-server linux102:9092 --topic first --alter --partitions 3")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("修改完成后查看详细")]),t._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@linux101 kafka"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# bin/kafka-topics.sh --bootstrap-server linux102:9092 --topic first --describe")]),t._v("\nTopic: first    TopicId: EgupyZ8MSGeKl9ePG3qGJw PartitionCount: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v("       ReplicationFactor: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v("    Configs: segment.bytes"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1073741824")]),t._v("\n        Topic: first    Partition: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("    Leader: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("       Replicas: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0,2")]),t._v(",1 Isr: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0,2")]),t._v(",1\n        Topic: first    Partition: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("    Leader: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("       Replicas: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1,2")]),t._v(",0 Isr: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1,2")]),t._v(",0\n        Topic: first    Partition: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("    Leader: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("       Replicas: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2,0")]),t._v(",1 Isr: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2,0")]),t._v(",1\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br")])]),a("p",[t._v("注意：使用--alter不能修改副本")]),t._v(" "),a("h3",{attrs:{id:"删除topic"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#删除topic"}},[t._v("#")]),t._v(" 删除topic")]),t._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@linux101 kafka"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# bin/kafka-topics.sh --bootstrap-server linux102:9092 --topic first --delete")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("删除后查看详情")]),t._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@linux101 kafka"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# bin/kafka-topics.sh --bootstrap-server linux102:9092 --topic first --describe")]),t._v("\nError "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),t._v(" executing topic "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("command")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" Topic "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'first'")]),t._v(" does not exist as expected\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2022")]),t._v("-04-09 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("12")]),t._v(":06:29,325"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" ERROR java.lang.IllegalArgumentException: Topic "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'first'")]),t._v(" does not exist as expected\n        at kafka.admin.TopicCommand$.kafka"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$admin")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$TopicCommand")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$$")]),t._v("ensureTopicExists"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("TopicCommand.scala:373"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        at kafka.admin.TopicCommand"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$TopicService")]),t._v(".describeTopic"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("TopicCommand.scala:301"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        at kafka.admin.TopicCommand$.main"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("TopicCommand.scala:61"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        at kafka.admin.TopicCommand.main"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("TopicCommand.scala"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("kafka.admin.TopicCommand$"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br")])]),a("h2",{attrs:{id:"生产者命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#生产者命令"}},[t._v("#")]),t._v(" 生产者命令")]),t._v(" "),a("p",[t._v("查看生产者命令参数")]),t._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@linux101 kafka"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# bin/kafka-console-producer.sh ")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h3",{attrs:{id:"常用参数-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#常用参数-2"}},[t._v("#")]),t._v(" 常用参数")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("参数")]),t._v(" "),a("th",[t._v("描述")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("--bootstrap-server <String: server toconnect to>")]),t._v(" "),a("td",[t._v("连接的 Kafka Broker主机名称和端口号")])]),t._v(" "),a("tr",[a("td",[t._v("--topic <String: topic>")]),t._v(" "),a("td",[t._v("操作的 topic名称")])]),t._v(" "),a("tr",[a("td"),t._v(" "),a("td")])])]),t._v(" "),a("h3",{attrs:{id:"发送消息"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#发送消息"}},[t._v("#")]),t._v(" 发送消息")]),t._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@linux101 kafka"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# bin/kafka-console-producer.sh  --bootstrap-server linux101:9092 --topic first")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("hello\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("kafka\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("h2",{attrs:{id:"消费者命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#消费者命令"}},[t._v("#")]),t._v(" 消费者命令")]),t._v(" "),a("p",[t._v("查看消费者命令参数")]),t._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@linux102 kafka"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# bin/kafka-console-consumer.sh")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h3",{attrs:{id:"常用参数-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#常用参数-3"}},[t._v("#")]),t._v(" 常用参数")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("参数")]),t._v(" "),a("th",[t._v("描述")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("--bootstrap-server <String: server toconnect to>")]),t._v(" "),a("td",[t._v("连接的 Kafka Broker主机名称和端口号")])]),t._v(" "),a("tr",[a("td",[t._v("--topic <String: topic>")]),t._v(" "),a("td",[t._v("操作的 topic名称")])]),t._v(" "),a("tr",[a("td",[t._v("--from-beginning")]),t._v(" "),a("td",[t._v("从头开始消费")])]),t._v(" "),a("tr",[a("td",[t._v("--group <String: consumer group id>")]),t._v(" "),a("td",[t._v("指定消费者组名称")])])])]),t._v(" "),a("h3",{attrs:{id:"消费消息"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#消费消息"}},[t._v("#")]),t._v(" 消费消息")]),t._v(" "),a("p",[t._v("消费first主题消息")]),t._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@linux102 kafka"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# bin/kafka-console-consumer.sh --bootstrap-server linux101:9092 --topic first")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("把主题中所有的数据都读取出来（包括历史数据，如果是超过了消息保留期的数据不会被消费到，如果是多个分区的数据，接收的消息也是无序的）")]),t._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@linux102 kafka"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# bin/kafka-console-consumer.sh --bootstrap-server linux101:9092 --topic first --from-beginning")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])])])}),[],!1,null,null,null);s.default=e.exports}}]);