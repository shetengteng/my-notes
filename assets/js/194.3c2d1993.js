(window.webpackJsonp=window.webpackJsonp||[]).push([[194],{1161:function(e,t,a){"use strict";a.r(t);var s=a(15),c=Object(s.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h2",{attrs:{id:"gc方面-使用-elasticsearch-时要注意什么"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#gc方面-使用-elasticsearch-时要注意什么"}},[e._v("#")]),e._v(" GC方面，使用 Elasticsearch 时要注意什么")]),e._v(" "),a("ul",[a("li",[a("strong",[e._v("倒排词典的索引需要常驻内存，无法 GC")]),e._v("，需要监控 data node 上 segment memory 增长趋势")]),e._v(" "),a("li",[e._v("各类缓存， field cache, filter cache, indexing cache, bulk queue 等等，要设置合理的大小，并且要应该根据最坏的情况来看 heap 是否够用，也就是各类缓存全部占满的时候，还有 heap 空间可以分配给其他任务吗？避免采用 clear cache 等“自欺欺人”的方式来释放内存")]),e._v(" "),a("li",[e._v("避免返回大量结果集的搜索与聚合。确实需要大量拉取数据的场景，"),a("strong",[e._v("可采用 scan & scroll api 来实现")])]),e._v(" "),a("li",[e._v("cluster stats 驻留内存并无法水平扩展，超大规模集群可以考虑分拆成多个集群通过 tribe node 连接")]),e._v(" "),a("li",[e._v("结合实际应用场景，对集群的 heap 使用情况做持续的监控")])])])}),[],!1,null,null,null);t.default=c.exports}}]);