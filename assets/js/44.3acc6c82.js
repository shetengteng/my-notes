(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{1101:function(t,_,v){"use strict";v.r(_);var a=v(15),e=Object(a.a)({},(function(){var t=this,_=t.$createElement,a=t._self._c||_;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("blockquote",[a("p",[t._v("可以从主分片或者从其它任意副本分片检索文档")])]),t._v(" "),a("img",{staticStyle:{zoom:"80%"},attrs:{src:v(695)}}),t._v(" "),a("h2",{attrs:{id:"步骤"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#步骤"}},[t._v("#")]),t._v(" 步骤")]),t._v(" "),a("ul",[a("li",[t._v("客户端向 Node 1 发送获取请求")]),t._v(" "),a("li",[t._v("节点使用文档的 _id 来确定文档属于分片 0 ；分片 0 的副本分片存在于所有的三个节点上。 上例中，它将请求转发到 Node 2")]),t._v(" "),a("li",[t._v("Node 2 将文档返回给 Node 1 ，然后将文档返回给客户端\n"),a("ul",[a("li",[t._v("在处理读取请求时，协调结点在每次请求的时候都会通过"),a("strong",[t._v("轮询所有的副本分片")]),t._v("来达到负载均衡\n"),a("ul",[a("li",[t._v("Node1 访问 Node2 是由于轮询到了Node 2节点")])])]),t._v(" "),a("li",[t._v("在文档被检索时，已经被索引的文档可能已经存在于主分片上但是还没有复制到副本分片。 在这种情况下，副本分片可能会报告文档不存在，但是主分片可能成功返回文档\n"),a("ul",[a("li",[t._v("即使数据已经在主分片了，也有可能查询不到，副本分片可能还没有数据")])])]),t._v(" "),a("li",[t._v("一旦索引请求成功返回给用户，文档在主分片和副本分片都是可用的")])])])]),t._v(" "),a("h2",{attrs:{id:"小结"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#小结"}},[t._v("#")]),t._v(" 小结")]),t._v(" "),a("p",[t._v("在处理读取请求时，协调结点在每次请求的时候都会通过轮询所有的副本分片来达到负载均衡")]),t._v(" "),a("p",[t._v("在文档被检索时，已经被索引的文档可能已经存在于主分片上但是还没有复制到副本分片。 在这种情况下，副本分片可能会报告文档不存在，但是主分片可能成功返回文档。 一旦索引请求成功返回给用户，文档在主分片和副本分片都是可用的")]),t._v(" "),a("p",[a("img",{attrs:{src:v(696),alt:""}})]),t._v(" "),a("ul",[a("li",[t._v("客户端发送查询请求到协调点")]),t._v(" "),a("li",[t._v("协调点计算数据所在的分片以及全部副本位置")]),t._v(" "),a("li",[t._v("为了负载均衡，轮询所有节点")]),t._v(" "),a("li",[t._v("将请求转发给具体的节点")]),t._v(" "),a("li",[t._v("节点返回结果给协调节点，协调节点将结果返回给客户端")])])])}),[],!1,null,null,null);_.default=e.exports},695:function(t,_,v){t.exports=v.p+"assets/img/read-data2.f0edb37d.png"},696:function(t,_,v){t.exports=v.p+"assets/img/read-data.5f33acaa.png"}}]);