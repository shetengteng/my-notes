(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{1092:function(t,v,_){"use strict";_.r(v);var l=_(15),s=Object(l.a)({},(function(){var t=this,v=t.$createElement,l=t._self._c||v;return l("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[l("p",[t._v("当集群中只有一个节点在运行时，意味着会有一个单点故障问题——没有冗余，如何处理")]),t._v(" "),l("ul",[l("li",[t._v("只需再启动一个节点即可防止数据丢失")]),t._v(" "),l("li",[t._v("在同一台机器上启动了第二个节点时，只要它和第一个节点有同样的 cluster.name 配置，它就会自动发现集群并加入到其中")]),t._v(" "),l("li",[t._v("注意\n"),l("ul",[l("li",[t._v("在不同机器上启动节点的时候，为了加入到同一集群，需要配置一个可连接到的"),l("strong",[t._v("单播主机列表")]),t._v("。之所以配置为使用单播发现，以防止节点无意中加入集群")]),t._v(" "),l("li",[t._v("只有在同一台机器上运行的节点才会自动组成集群")])])])]),t._v(" "),l("blockquote",[l("p",[t._v("本示例在windows上进行，由于是一台设备启动多个服务，因此会自动组成集群")])]),t._v(" "),l("p",[t._v("如果启动了第二个节点，集群将会拥有两个节点 : 所有主分片和副本分片都已被分配")]),t._v(" "),l("p",[l("img",{attrs:{src:_(681),alt:""}})]),t._v(" "),l("p",[t._v("通过 elasticsearch-head 插件查看集群情况")]),t._v(" "),l("ul",[l("li",[t._v("集群健康值 green( 3 of 6 )：表示所有 6 个分片（包括 3 个主分片和 3 个副本分片）都在正常运行")]),t._v(" "),l("li",[t._v("加粗框1,2,3表示主分片，而非加粗框表示副本分片")]),t._v(" "),l("li",[t._v("3 个主分片正常")]),t._v(" "),l("li",[t._v("第二个节点加入到集群后， 3 个副本分片将会分配到这个节点上——每 个主分片对应一个副本分片\n"),l("ul",[l("li",[t._v("当集群内任何一个节点出现问题时，数据都完好无损")]),t._v(" "),l("li",[t._v("所有新近被索引的文档都将会保存在主分片上，然后被"),l("strong",[t._v("并行的复制")]),t._v("到对应的副本分片上")]),t._v(" "),l("li",[t._v("既可以从主分片又可以从副本分片上获得文档")])])])]),t._v(" "),l("p",[l("img",{attrs:{src:_(682),alt:""}})])])}),[],!1,null,null,null);v.default=s.exports},681:function(t,v,_){t.exports=_.p+"assets/img/windows-cluster-demo3.a52cdd95.png"},682:function(t,v,_){t.exports=_.p+"assets/img/windows-cluster-demo4.b64b3b43.png"}}]);