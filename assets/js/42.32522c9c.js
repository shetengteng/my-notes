(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{1090:function(s,a,t){"use strict";t.r(a);var e=t(15),n=Object(e.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h2",{attrs:{id:"创建演示索引"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#创建演示索引"}},[s._v("#")]),s._v(" 创建演示索引")]),s._v(" "),e("p",[s._v("当前示例在windows集群模式下进行，先关闭集群，只开启node-1001节点")]),s._v(" "),e("ul",[e("li",[s._v("注意删除之前windows集群节点的data和logs文件夹，如果存在的话，避免影响演示")])]),s._v(" "),e("p",[s._v("在包含一个空节点的集群内创建名为 users 的索引，为了演示目的，分配 3个主分片和一份副本（每个主分片拥有一个副本分片）")]),s._v(" "),e("p",[s._v("在 Postman 中，向 ES 服务器发 PUT 请求")]),s._v(" "),e("div",{staticClass:"language-http line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-http"}},[e("code",[s._v("PUT http://localhost:1001/users\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("body")]),s._v(" "),e("div",{staticClass:"language-json line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[s._v('"settings"')]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),e("span",{pre:!0,attrs:{class:"token property"}},[s._v('"number_of_shards"')]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),e("span",{pre:!0,attrs:{class:"token property"}},[s._v('"number_of_replicas"')]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("p",[s._v("response")]),s._v(" "),e("div",{staticClass:"language-json line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[s._v('"acknowledged"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[s._v('"shards_acknowledged"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[s._v('"index"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"users"')]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("p",[s._v("目前集群拥有一个索引的单节点集群。所有 3 个主分片都被分配在 node-1")]),s._v(" "),e("p",[e("img",{attrs:{src:t(679),alt:""}})]),s._v(" "),e("h2",{attrs:{id:"使用elasticsearch-head插件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#使用elasticsearch-head插件"}},[s._v("#")]),s._v(" 使用elasticsearch-head插件")]),s._v(" "),e("p",[s._v("通过 elasticsearch-head 插件（chrome插件）查看集群情况")]),s._v(" "),e("h3",{attrs:{id:"安装插件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装插件"}},[s._v("#")]),s._v(" 安装插件")]),s._v(" "),e("p",[s._v("插件获取网址 https://github.com/mobz/elasticsearch-head ，下载压缩包，解压后将内容放入自定义命名为elasticsearch-head文件夹")]),s._v(" "),e("p",[s._v("点击Chrome右上角选项->工具->管理扩展（或则地址栏输入chrome://extensions/），选择打开“开发者模式”，让后点击“加载已解压得扩展程序”，选择elasticsearch-head/_site，即可完成chrome插件安装")]),s._v(" "),e("h3",{attrs:{id:"查看集群情况"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#查看集群情况"}},[s._v("#")]),s._v(" 查看集群情况")]),s._v(" "),e("p",[s._v("集群健康值 yellow( 3 of 6 )：表示当前集群的全部主分片都正常运行，但是副本分片没有全部处在正常状态")]),s._v(" "),e("ul",[e("li",[s._v("node-1001的绿色0,1,2  表示主分片正常")]),s._v(" "),e("li",[s._v("Unassigned的灰色0,1,2 表示 3 个副本分片都是没有被分配到任何节点\n"),e("ul",[e("li",[s._v("同一个节点上既保存原始数据又保存副本是没有意义的，一旦失去了那个节点，也将丢失该节点上的所有副本数据")])])])]),s._v(" "),e("p",[e("img",{attrs:{src:t(680),alt:""}})]),s._v(" "),e("p",[s._v("结论：当前集群是正常运行的，但是在硬件故障时有丢失数据的风险")])])}),[],!1,null,null,null);a.default=n.exports},679:function(s,a,t){s.exports=t.p+"assets/img/windows-cluster-demo1.5a74a0fe.png"},680:function(s,a,t){s.exports=t.p+"assets/img/windows-cluster-demo2.0f93702e.png"}}]);